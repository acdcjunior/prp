<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings
 	xmlns="http://java.sun.com/xml/ns/persistence/orm" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm
						http://java.sun.com/xml/ns/persistence/orm_1_0.xsd"
	version="1.0">
	
	<named-query name="Previsao.findByCategoria">
		<query>
			SELECT
				p
			FROM
				Previsao p
			WHERE
				p.categoria = :categoria
		</query>
	</named-query>
	
	<named-query name="Previsao.findByAnoMesCategoria">
		<query>
			SELECT
				p
			FROM
				Previsao p
			WHERE
				YEAR(p.data) = :ano and MONTH(p.data) = :mes
				AND p.categoria = :categoria
		</query>
	</named-query>
	
	<named-query name="Previsao.findByAnoMes">
		<query>
			SELECT
				p
			FROM
				Previsao p
			WHERE
				YEAR(p.data) = :ano and MONTH(p.data) = :mes
		</query>
	</named-query>
	
	<named-query name="Previsao.findByAno">
		<query>
			SELECT
				p
			FROM
				Previsao p
			WHERE
				YEAR(p.data) = :ano
		</query>
	</named-query>
	
	<named-query name="Previsao.sumValorByAnoMesCategoria">
		<query>
			SELECT
				sum(p.valor)
			FROM
				Previsao p
			WHERE
				YEAR(p.data) = :ano and MONTH(p.data) = :mes
				AND p.categoria = :categoria
		</query>
	</named-query>

</entity-mappings>